<!doctype html>
<html>
<head>
  <title>Results</title>
</head>
<body>
  <h1>Top Results</h1>
  {% if results %}
    <ul>
    {% for r in results %}
      <li>
        <strong>{{ r.place }}</strong> ({{ r.city }}) – rating {{ "%.1f"|format(r.ratings_place) }}<br>
        IR score: {{ "%.3f"|format(r.ir_score) }}, ML score: {{ "%.3f"|format(r.ml_score) }}<br>
        Best time: {{ r.best_time_to_visit }} &middot; Duration: {{ r.ideal_duration }}
      </li>
    {% endfor %}
    </ul>
  {% else %}
    <p>No matches found.</p>
  {% endif %}

  <h2>Evaluation Metrics</h2>
  <p>
    <strong>IR‐only:</strong>
    NDCG@{{ metrics.K }} {{ "%.4f"|format(metrics.ir_ndcg) }},
    PRECISION@{{ metrics.K }} {{ "%.4f"|format(metrics.ir_precision) }},
    RECALL@{{ metrics.K }} {{ "%.4f"|format(metrics.ir_recall) }},
    MAP@{{ metrics.K }} {{ "%.4f"|format(metrics.ir_map) }},
    F-MEASURE@{{ metrics.K }} {{ "%.4f"|format(metrics.ir_F_measure) }},
  </p>
  <p>
    <strong>ML‐ranker:</strong>
    NDCG@{{ metrics.K }} {{ "%.4f"|format(metrics.ml_ndcg) }},
    PRECISION@{{ metrics.K }} {{ "%.4f"|format(metrics.ml_precision) }},
    RECALL@{{ metrics.K }} {{ "%.4f"|format(metrics.ml_recall) }},
    MAP@{{ metrics.K }} {{ "%.4f"|format(metrics.ml_map) }},
    F-MEASURE@{{ metrics.K }} {{ "%.4f"|format(metrics.ml_F_measure) }},
  </p>
  <hr>
  <p><a href="{{ url_for('index') }}">← New search</a></p>
</body>
</html>

